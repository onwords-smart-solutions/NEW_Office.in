{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/forms.css' %}">
    <link rel="stylesheet" href="{% static 'css/pr.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- chart js start  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <!-- chart js end -->
    <title>adminconsole</title>
</head>

<body>
    <div class="main-con ">
        <div class="nav-con " onclick="navcon()">
            <nav class="px-2">
                <div class="container-fluid p-0 m-0">
                    <div class="navlistlogo">
                        <div class="left-nav-list">
                            <div class="menu-icon">
                                <img src="{% static 'images/nav-icon/small-icon.png' %}" alt="small_Icon"
                                    class="small-logo">
                                <img src="{% static 'images/close.png' %}" alt="menu_Icon" class="close-icons">
                            </div>
                        </div>
                        <div class="right-nav-list">
                            <img src="{% static 'images/nav-icon/main-log.svg' %}" alt="small_Icon" class="main-logo">
                        </div>
                    </div>
                    <div class="user-profile">
                        <li class="user-visual">
                            <div class="left-nav-list"> <img src="{% static 'images/menu.png' %}" alt="menu_Icon"
                                    class="menu-icons"></div>
                            <div class="right-nav-list">
                                <div class="user-profiles">
                                    <div class="user-img">
                                        <img src="{% static 'images/user-profile.svg' %}" alt="user-profile">
                                    </div>
                                    <div class="emply-id">
                                        <span>{{ name }}</span><br>
                                        <span>{% if dep == "WEB" %}
                                            <p>Web Developer</p>
                                            {% elif dep == "APP" %}
                                            <p>App developer</p>
                                            {% elif dep == "MEDIA" %}
                                            <p>Graphic designer</p>
                                            {% elif dep == "PR" %}
                                            <p>PR</p>
                                            {% elif dep == "RND" %}
                                            <p>R&D</p>
                                            {% else %}
                                            <p>Admin</p>
                                            {% endif %}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </li>

                    </div>
                    <ul id="nav-main-con">
                        <li class="navlistmenu " onclick="location.href='/'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/dashboard.svg' %}" alt="dashboard_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Home</h5>
                            </div>
                        </li>
                        {% if general %}
                        <li class="navlistmenu " onclick="location.href='/leave_form'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/forms-icon.svg' %}" alt="dashboard_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Leave Form</h5>
                            </div>
                        </li>
                        <li class="navlistmenu" onclick="location.href='/late_form'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/late-icons.png' %}" alt="dashboard_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Late Form</h5>
                            </div>
                        </li>
                        <li class="navlistmenu" onclick="location.href='/suggestion'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/suggestion.png' %}" alt="dashboard_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Suggestion</h5>
                            </div>
                        </li>
                        {% endif %}

                        <!-- ===========tl's============================ -->
                        {% if approvalpage %}
                        <li class="navlistmenu" onclick="location.href='/approval'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/approval.png' %}" alt="dashboard_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Approval</h5>
                            </div>
                        </li>

                        {% endif %}

                        {% if rnd %}

                        <li class="navlistmenu " onclick="location.href='/inprocess'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/inprocess.svg' %}" alt="inprocess_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>In Process</h5>
                            </div>
                        </li>
                        <li class="navlistmenu " onclick="location.href='/create'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/create-product.svg' %}" alt="inprocess_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Create Product</h5>
                            </div>
                        </li>

                        {% endif %}

                        {% if account %}
                        <li class="navlistmenu" onclick="location.href='/financial'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/financial-icon.svg' %}" alt="dashboard_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Financial</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if createlead %}
                        <li class="navlistmenu " onclick="location.href='/create_lead'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/create_lead.svg' %}" alt="create_lead">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Create Lead</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if customerdetails %}
                        <li class="navlistmenu " onclick="location.href='/customer_details'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/customer-icon.svg' %}" alt="dashboard_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Customer Details</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if quotation %}
                        <li class="navlistmenu" onclick="location.href='/quotation'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/invoice.png' %}" alt="quottaion_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Quotation</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if inventory %}
                        <li class="navlistmenu" onclick="location.href='/inventorymanagement'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/invoice.png' %}" alt="inventory_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Inventory</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if createstaff %}
                        <li class="navlistmenu " onclick="location.href='/createstaff'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/create-staff.svg' %}" alt="createstaff_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Create Staff</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if viewworkmanager %}
                        <li class="navlistmenu" onclick="location.href='/viewworkmanager'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/viewworkmanager.svg' %}"
                                        alt="createstaff_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>View Workmanager</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if viewsuggestion %}
                        <li class="navlistmenu" onclick="location.href='/viewsuggestion'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/viewsuggestion.svg' %}" alt="userdata_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>View Suggestion</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if userdata %}
                        <li class="navlistmenu" onclick="location.href='/userdata'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/userdata.svg' %}" alt="userdata_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>User Data</h5>
                            </div>
                        </li>
                        {% endif %}

                        {% if prdashboard %}
                        <li class="navlistmenu " onclick="location.href='/prdashboard'">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/prdashboard.svg' %}" alt="userdata_Icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>PR Dashboard</h5>
                            </div>
                        </li>
                        {% endif %}

                        <!-- =========================== -->

                    </ul>
                    <div class="logout" onclick="location.href='/logout/'">
                        <li class="navlistmenu">
                            <div class="left-nav-list">
                                <div class="menu-icon">
                                    <img src="{% static 'images/nav-icon/logout-icon.svg' %}" alt="dashboard_Icon"
                                        class="logout-icon">
                                </div>
                            </div>
                            <div class="right-nav-list">
                                <h5>Logout</h5>
                            </div>
                        </li>
                    </div>
                </div>
            </nav>
        </div>
        <div class="right-con " id="rightCon" onclick="rightcon()">

            <div class="container-fluid">
                <div class="row my-3 align-items-center ">
                    <div class="col-md-4" id="checkin-date">
                        <h3>Check in- Check Out</h3>
                        <h4>Date : {{date}}</h4>
                    </div>
                    <div class="col-md-4" id="absent-date">
                        <h3>Absentees</h3>
                        <h4>Date : {{date1}}</h4>
                    </div>
                    
                    <div class="col-md-6">
                        <form action="">
                            <div class="customer-searchbar">
                                <div class="cust-inp">
                                    <input type="text" placeholder="Search">
                                </div>
                                <div class="searchBtn" type="submit">
                                    <img src="{% static 'images/search-icon.svg' %}" alt="search-icon"
                                        class="img-fluid">
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-2">
                        <form method="post" action="/checkin/" id="myForm">
                            {% csrf_token %}
                            <input type="hidden" name="form_type" value="presentForm">
                            <input type="date" id="datetime" name="date" onchange="dateTimeSubmit()">
                        </form>
                        <form method="post" action="/checkin/" id="absentmyForm">
                            {% csrf_token %}
                            <input type="hidden" name="form_type" value="absentForm">
                            <input type="date" id="datetime" name="date" onchange="dateTimeSubmit1()">
                        </form>
                       
                    </div>
                </div>
                <div class="check-table-con">
                  <div id="checkin-table">
                    <table class="table w-100 checkin-table"  id="checkinTable" >
                        <thead>
                            <tr  class="leave-table-head text-center">
                                <th>S.No</th>
                                <th>Name</th>
                                <th>Check in</th>
                                <th>Check Out</th>
                                <th>Working Hrs</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for staffnamelist,attendenceloginlist,attendencelogoutlist,workinghourlist,workinghourlistall,attype,outtype in finallist %}
                            <tr class="table-body-li my-3 text-center checkintr">
                                <td class="checkintd"></td>
                                <td>{{staffnamelist}}</td>
                                <td>{{attendenceloginlist}}</td>
                                <td>{{attendencelogoutlist}}</td>
                                <td>{{workinghourlist}} hrs</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                  </div>
                  <div id="absentList-table">
                      <table class="table w-100"  id="absentTable" >
                        <thead>
                            <tr  class="leave-table-head">
                                <th>S.No</th>
                                <th>Name</th>
                                <th>type</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for name, type, status in allabsentees %}
                            <tr class="table-body-li my-3 absenttr">
                                <td class="absenttd"></td>
                                <td>{{name}}</td>
                                <td>{{type}}</td>
                                <td>{{status}}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                  </div>
                    <div class="check-bottom-con">
                        <div class="">
                            <button class="btn btn-danger fw-bold" id="absentBtn" onclick="absentBtn()">Absent
                                List</button>
                            <button class="btn btn-info fw-bold" id="presentBtn" onclick="presentBtn()">Present
                                List</button>
                        </div>
                        <button class="primary-button" id="printcheckBtn" onclick="printCheckinTable()">download </button>
                        <button class="primary-button" id="printabsentBtn" onclick="printAbsentTable()">Print Absent
                        </button>
                    </div>
                </div>

            </div>

        </div>
    </div>

    <!-- bootstrap js -->
    <script src="{% static 'js/bootstrap.bundle.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- js script  start -->
    <script src="{% static 'js/main.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <!-- js script  end -->
    <script>
        function dateTimeSubmit() {
            document.getElementById("myForm").submit();
           
        }
        function dateTimeSubmit1() {
        document.getElementById("absentmyForm").submit()
        }
    </script>
    <script>
        const rows = document.querySelectorAll('.checkintr');
        rows.forEach((row, index) => {
            const snoCell = row.querySelector('.checkintd');
            snoCell.textContent = index + 1;
        });
        const rows1 = document.querySelectorAll('.absenttr');
        rows1.forEach((row, index) => {
            const snoCell = row.querySelector('.absenttd');
            snoCell.textContent = index + 1;
        });
    </script>
<!-- 
    <script>
        function exportToExcel() {
            var location = 'data:application/vnd.ms-excel;base64,';
            var excelTemplate = '<html> ' +
                '<head> ' +
                '<meta http-equiv="content-type" content="text/plain; charset=UTF-8"/> ' +
                '</head> ' +
                '<body> ' +
                document.getElementById("table-conatainer").innerHTML +
                '</body> ' +
                '</html>'
            window.location.href = location + window.btoa(excelTemplate);
        }
    </script> -->

</body>

</html>